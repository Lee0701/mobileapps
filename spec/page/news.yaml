paths:
  # from routes/feed/news.js
  /{domain}/v1/page/news:
    get:
      tags:
        - Feed
      summary: Get current news headlines.
      description: |
        Gets content related to the current "In the News" template
        (for some wikis for now).
      parameters:
        - $ref: '#/components/parameters/domainParam'
      responses:
        200:
          description: News content from the a Wikipedia main page
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/news'
        204:
          description: Empty response (for feed content aggregation requests from RESTBase)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/empty'
        501:
          description: Unsupported language
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/problem'
        default:
          $ref: "#/components/responses/problem"
      x-amples:
        - title: get 'In the News' content
          response:
            status: 200
            headers:
              content-type: application/json; charset=utf-8
              vary: /.+/
              etag: /^"[^/"]+/[^/"]+"$/
              access-control-allow-origin: '*'
              access-control-allow-headers: accept, x-requested-with, content-type
              content-security-policy: default-src
              x-content-security-policy: default-src
              x-frame-options: SAMEORIGIN
            body:
              - story: /.+/
                links:
                  - $merge: [ /.+/ ]
        - title: get "In the News" content for unsupported language (with aggregated=true)
          request:
            params:
              domain: is.wikipedia.org
            query:
              aggregated: true
          response:
            status: 204
            body: ''
components:
  schemas:
    news_item:
      type: object
      properties:
        story:
          type: string
          description: A cover story for the news item
        links:
          type: array
          description: |
            A collection of pages mentioned in the headline. The first page is the headline topic.
          items:
            $ref: '#/components/schemas/article_summary_merge_link'
      required:
        - story
        - links

    news:
      type: array
      items:
        $ref: '#/components/schemas/news_item'
